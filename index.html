<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>REDACTED // Bureau of Records Integrity</title>

		<!-- Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Courier+Prime:wght@400;700&family=Oswald:wght@400;700&family=Inter:wght@400;600&family=Space+Mono:ital,wght@0,400;0,700;1,400&display=swap"
			rel="stylesheet" />

		<style>
			:root {
				/* Base Palette (landing.html) */
				--bg-dark: #050505;
				--bg-panel: #0d1117;
				--bg-paper: #f4f1ea;
				--text-main: #e5e5e5;
				--text-muted: #9ca3af;
				--accent-red: #d01010;
				--accent-red-glow: rgba(208, 16, 16, 0.4);
				--accent-gold: #c9a227;
				--accent-manila: #d2b48c;

				/* GLM Additions */
				--accent-cyan: #00f0ff;
				--ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);

				--font-head: "Oswald", sans-serif;
				--font-body: "Courier Prime", monospace;
				--font-special: "Special Elite", cursive;
				--font-mono: "Space Mono", monospace;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				cursor: none; /* Custom cursor */
			}

			html {
				scroll-behavior: smooth;
			}

			body {
				background-color: var(--bg-dark);
				color: var(--text-main);
				font-family: var(--font-body);
				line-height: 1.6;
				overflow-x: hidden;
				min-height: 100vh;
			}

			/* --- FX Overlays --- */
			.crt-overlay {
				pointer-events: none;
				position: fixed;
				inset: 0;
				background: linear-gradient(
					rgba(18, 16, 16, 0) 50%,
					rgba(0, 0, 0, 0.25) 50%
				);
				background-size: 100% 4px;
				z-index: 9997;
				opacity: 0.3;
			}

			.vignette {
				pointer-events: none;
				position: fixed;
				inset: 0;
				background: radial-gradient(
					circle at center,
					transparent 50%,
					rgba(0, 0, 0, 0.8) 120%
				);
				z-index: 9996;
			}

			.noise-bg {
				position: fixed;
				inset: 0;
				z-index: 0;
				opacity: 0.04;
				pointer-events: none;
				background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
			}

			/* Canvas Background */
			#data-stream {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				z-index: -1;
				opacity: 0.3;
			}

			/* --- Custom Cursor --- */
			#cursor-dot,
			#cursor-ring {
				position: fixed;
				top: 0;
				left: 0;
				transform: translate(-50%, -50%);
				border-radius: 50%;
				z-index: 9999;
				pointer-events: none;
			}

			#cursor-dot {
				width: 8px;
				height: 8px;
				background-color: var(--accent-red);
			}

			#cursor-ring {
				width: 40px;
				height: 40px;
				border: 1px solid var(--text-muted);
				transition: width 0.2s, height 0.2s, background-color 0.2s;
			}

			body:hover #cursor-ring.hovered {
				width: 60px;
				height: 60px;
				background-color: rgba(208, 16, 16, 0.1);
				border-color: var(--accent-red);
			}

			/* --- Status Bar --- */
			.status-bar {
				background: #000;
				border-bottom: 1px solid var(--accent-red);
				padding: 0.4rem 2rem;
				font-size: 0.7rem;
				text-transform: uppercase;
				letter-spacing: 0.1em;
				display: flex;
				justify-content: space-between;
				align-items: center;
				font-family: var(--font-mono);
				position: relative;
				z-index: 1002;
			}

			.status-bar .blink {
				animation: blinker 1s linear infinite;
				color: var(--accent-red);
				font-weight: bold;
			}

			@keyframes blinker {
				50% {
					opacity: 0;
				}
			}

			/* --- Layout Utilities --- */
			.container {
				max-width: 1200px;
				margin: 0 auto;
				padding: 0 2rem;
				position: relative;
				z-index: 10;
			}

			section {
				padding: 6rem 0;
				position: relative;
				border-bottom: 1px solid rgba(255, 255, 255, 0.05);
			}

			h2 {
				font-family: var(--font-head);
				font-size: 3rem;
				text-transform: uppercase;
				letter-spacing: 0.1em;
				margin-bottom: 1rem;
				line-height: 1.1;
			}

			.section-header {
				text-align: center;
				margin-bottom: 4rem;
			}

			.subtitle {
				color: var(--accent-red);
				font-family: var(--font-special);
				font-size: 1.2rem;
				letter-spacing: 0.2em;
				text-transform: uppercase;
				display: block;
				margin-bottom: 0.5rem;
			}

			/* --- Navigation --- */
			nav {
				position: sticky;
				top: 0;
				background: rgba(5, 5, 5, 0.9);
				backdrop-filter: blur(8px);
				border-bottom: 1px solid rgba(255, 255, 255, 0.1);
				z-index: 1000;
				padding: 1rem 0;
			}

			.nav-inner {
				display: flex;
				justify-content: space-between;
				align-items: center;
			}

			.nav-logo {
				font-family: var(--font-special);
				font-size: 1.2rem;
				font-weight: bold;
				color: var(--text-main);
				text-decoration: none;
				letter-spacing: 0.1em;
			}

			.nav-right {
				display: flex;
				align-items: center;
				gap: 2rem;
			}

			.nav-links {
				display: flex;
				gap: 2rem;
			}

			.nav-link {
				color: var(--text-muted);
				text-decoration: none;
				text-transform: uppercase;
				font-size: 0.85rem;
				letter-spacing: 0.15em;
				transition: color 0.3s;
			}

			.nav-link:hover {
				color: var(--accent-red);
			}

			/* Nav Controls (GLM style) */
			.nav-controls {
				display: flex;
				gap: 1rem;
				align-items: center;
				margin-left: 2rem;
				border-left: 1px solid rgba(255, 255, 255, 0.1);
				padding-left: 2rem;
			}

			.override-switch {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				font-size: 0.7rem;
				text-transform: uppercase;
				border: 1px solid var(--accent-red);
				padding: 0.3rem 0.6rem;
				color: var(--accent-red);
				transition: all 0.3s;
				font-family: var(--font-mono);
			}

			.override-switch:hover {
				background: rgba(208, 16, 16, 0.1);
			}

			.toggle-checkbox {
				appearance: none;
				width: 30px;
				height: 16px;
				background: #333;
				border-radius: 20px;
				position: relative;
				outline: none;
			}

			.toggle-checkbox::after {
				content: "";
				position: absolute;
				top: 2px;
				left: 2px;
				width: 12px;
				height: 12px;
				background: #fff;
				border-radius: 50%;
				transition: 0.3s;
			}

			.toggle-checkbox:checked {
				background: var(--accent-red);
			}

			.toggle-checkbox:checked::after {
				transform: translateX(14px);
			}

			/* --- Hero Section --- */
			.hero {
				min-height: 90vh;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
				background: radial-gradient(
					ellipse at center,
					rgba(30, 10, 10, 0.4) 0%,
					transparent 70%
				);
			}

			.logo-wrapper {
				position: relative;
				display: inline-block;
				margin-bottom: 2rem;
			}

			/* Glitch Title */
			h1.glitch-title {
				font-family: var(--font-head);
				font-size: clamp(3.5rem, 12vw, 8rem);
				font-weight: 700;
				color: var(--accent-red);
				letter-spacing: 0.15em;
				line-height: 1;
				text-transform: uppercase;
				position: relative;
				z-index: 1;
				mix-blend-mode: normal; /* Override GLM lighten */
			}

			h1.glitch-title::before,
			h1.glitch-title::after {
				content: attr(data-text);
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				opacity: 0.8;
			}

			h1.glitch-title::before {
				color: #fff;
				z-index: -1;
				clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);
				animation: glitch-anim-1 3s infinite linear alternate-reverse;
			}

			h1.glitch-title::after {
				color: var(--accent-red);
				z-index: -2;
				clip-path: polygon(0 60%, 100% 60%, 100% 100%, 0 100%);
				animation: glitch-anim-2 2.5s infinite linear alternate-reverse;
			}

			/* Redaction Sweep Animation from landing.html */
			.logo-redactor {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: #000;
				transform-origin: left;
				animation: redactor-sweep 4s cubic-bezier(0.7, 0, 0.3, 1) infinite;
				z-index: 2;
				opacity: 0.95;
			}

			@keyframes redactor-sweep {
				0%,
				20% {
					transform: scaleX(0);
				}
				40%,
				60% {
					transform: scaleX(1);
				}
				80%,
				100% {
					transform: scaleX(0);
					transform-origin: right;
				}
			}

			@keyframes glitch-anim-1 {
				0% {
					transform: translate(0);
				}
				20% {
					transform: translate(-2px, 2px);
				}
				40% {
					transform: translate(-2px, -2px);
				}
				60% {
					transform: translate(2px, 2px);
				}
				80% {
					transform: translate(2px, -2px);
				}
				100% {
					transform: translate(0);
				}
			}

			@keyframes glitch-anim-2 {
				0% {
					transform: translate(0);
				}
				20% {
					transform: translate(2px, -2px);
				}
				40% {
					transform: translate(2px, 2px);
				}
				60% {
					transform: translate(-2px, -2px);
				}
				80% {
					transform: translate(-2px, 2px);
				}
				100% {
					transform: translate(0);
				}
			}

			.hero-tagline {
				color: var(--text-muted);
				font-size: 1.2rem;
				margin-bottom: 2.5rem;
				letter-spacing: 0.05em;
				max-width: 600px;
				margin-left: auto;
				margin-right: auto;
			}

			.btn {
				display: inline-block;
				background: var(--accent-red);
				color: white;
				padding: 1rem 2.5rem;
				text-decoration: none;
				text-transform: uppercase;
				letter-spacing: 0.15em;
				font-weight: bold;
				font-family: var(--font-head);
				font-size: 1.1rem;
				clip-path: polygon(
					10px 0,
					100% 0,
					100% calc(100% - 10px),
					calc(100% - 10px) 100%,
					0 100%,
					0 10px
				);
				transition: all 0.3s ease;
				box-shadow: 0 0 15px rgba(208, 16, 16, 0.2);
			}

			.btn:hover {
				background: #b91c1c;
				transform: translateY(-2px);
				box-shadow: 0 0 30px var(--accent-red-glow);
			}

			/* --- Briefing / Dossier --- */
			.briefing-layout {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 4rem;
				align-items: center;
			}

			.dossier-container {
				position: relative;
				padding: 2rem;
			}

			.paper-sheet {
				background: var(--bg-paper);
				color: #1a1a1a;
				padding: 3rem;
				position: relative;
				box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
				transform: rotate(-1.5deg);
				font-family: var(--font-body);
			}

			.paper-sheet::before {
				content: "TOP SECRET";
				position: absolute;
				top: 2rem;
				right: 2rem;
				border: 3px solid var(--accent-red);
				color: var(--accent-red);
				padding: 0.2rem 1rem;
				font-family: var(--font-special);
				font-weight: bold;
				font-size: 1.2rem;
				transform: rotate(12deg);
				opacity: 0.8;
			}

			.paper-header {
				border-bottom: 2px solid #ccc;
				padding-bottom: 1rem;
				margin-bottom: 1.5rem;
			}

			/* Typewriter Specifics */
			.typewriter-text {
				white-space: pre-wrap;
				font-size: 0.95rem; /* Matched to paper */
				line-height: 1.6;
			}

			.cursor-blink {
				display: inline-block;
				width: 8px;
				height: 1em;
				background-color: var(--accent-red);
				animation: blinker 1s step-end infinite;
				vertical-align: middle;
			}

			/* Interactive Redaction */
			.redact {
				background: #000;
				color: #000;
				padding: 0 4px;
				transition: all 0.2s ease;
				user-select: none;
				position: relative;
				cursor: none;
			}

			.redact:hover {
				background: transparent;
				color: var(--accent-red);
			}

			body.override-active .redact {
				background: transparent;
				color: var(--accent-red);
				text-decoration: line-through;
				opacity: 0.7;
			}

			/* Hidden UV Text in Paper */
			.uv-text {
				opacity: 0;
				color: blue; /* Ink color for paper */
				transition: opacity 0.5s;
				font-family: "Indie Flower", cursive; /* Handwritten look if available, else cursive */
				font-weight: bold;
			}
			body.uv-mode .uv-text {
				opacity: 1;
			}

			/* --- Tools Grid --- */
			.tools-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
				gap: 2rem;
			}

			.tool-card {
				background: var(--bg-panel);
				border: 1px solid rgba(255, 255, 255, 0.1);
				padding: 2rem;
				transition: transform 0.3s, border-color 0.3s;
				position: relative;
				overflow: hidden;
			}

			.tool-card:hover {
				transform: translateY(-5px);
				border-color: var(--accent-red);
			}

			.tool-card h3 {
				color: var(--accent-red);
				font-family: var(--font-head);
				font-size: 1.4rem;
				margin-bottom: 0.5rem;
				letter-spacing: 0.05em;
			}

			.tool-icon {
				font-size: 2rem;
				margin-bottom: 1rem;
				display: block;
				opacity: 0.8;
			}

			/* --- Chapters / Folders --- */
			.chapters-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
				gap: 1.5rem;
				margin-top: 2rem;
			}

			.folder {
				background: var(--accent-manila);
				color: #2c2c2c;
				padding: 2rem;
				position: relative;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
				transition: all 0.3s;
				border-radius: 0 0 4px 4px;
			}

			.folder::before {
				content: "";
				position: absolute;
				top: -15px;
				left: 0;
				width: 35%;
				height: 15px;
				background: var(--accent-manila);
				border-radius: 4px 4px 0 0;
			}

			.folder:hover {
				transform: translateY(-8px) rotate(-0.5deg);
				box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
			}

			.folder strong {
				display: block;
				font-family: var(--font-special);
				font-size: 0.9rem;
				text-transform: uppercase;
				opacity: 0.7;
				margin-bottom: 0.5rem;
			}

			.folder h3 {
				font-family: var(--font-head);
				font-size: 1.5rem;
				margin-bottom: 0.5rem;
				border-bottom: 1px solid rgba(0, 0, 0, 0.1);
				padding-bottom: 0.5rem;
			}

			/* --- Footer --- */
			footer {
				background: #000;
				padding: 4rem 2rem;
				text-align: center;
				border-top: 1px solid rgba(255, 255, 255, 0.1);
			}

			.footer-logo {
				font-family: var(--font-special);
				color: var(--accent-red);
				font-size: 1.5rem;
				margin-bottom: 1rem;
			}

			.legal {
				color: #444;
				font-size: 0.75rem;
				text-transform: uppercase;
				letter-spacing: 0.1em;
				margin-top: 2rem;
			}

			@media (max-width: 768px) {
				.briefing-layout {
					grid-template-columns: 1fr;
				}
				.nav-inner {
					flex-direction: column;
					gap: 1rem;
				}
				.nav-right {
					flex-direction: column;
					gap: 1rem;
				}
				.nav-controls {
					border-left: none;
					padding-left: 0;
					margin-left: 0;
				}
			}
		</style>
	</head>
	<body>
		<!-- Interactive BGs -->
		<canvas id="data-stream"></canvas>
		<div class="crt-overlay"></div>
		<div class="vignette"></div>
		<div class="noise-bg"></div>

		<!-- Custom Cursor -->
		<div id="cursor-dot"></div>
		<div id="cursor-ring"></div>

		<!-- Top Status Bar -->
		<div class="status-bar">
			<span>SYS: ONLINE</span>
			<span class="blink">/// UNSECURED CONNECTION ///</span>
			<span>ID: GUEST-892</span>
		</div>

		<!-- Nav -->
		<nav>
			<div class="container nav-inner">
				<a href="#" class="nav-logo hover-trigger">REDACTED</a>

				<div class="nav-right">
					<div class="nav-links">
						<a href="#assignment" class="nav-link hover-trigger">Assignment</a>
						<a href="#tools" class="nav-link hover-trigger">Tools</a>
						<a href="#archives" class="nav-link hover-trigger">Archives</a>
					</div>

					<div class="nav-controls">
						<div class="override-switch hover-trigger" id="uv-switch">
							<span>UV FILTER</span>
							<input type="checkbox" class="toggle-checkbox" />
						</div>
						<div
							class="override-switch hover-trigger"
							style="border-color: #fff; color: #fff">
							<span>DECYPHER</span>
							<input
								type="checkbox"
								class="toggle-checkbox"
								id="override-toggle" />
						</div>
					</div>
				</div>
			</div>
		</nav>

		<!-- Hero -->
		<section class="hero">
			<div class="container">
				<!-- Animated Glitch Title -->
				<div class="logo-wrapper">
					<h1 class="glitch-title" data-text="REDACTED">REDACTED</h1>
					<div class="logo-redactor"></div>
				</div>

				<h2 class="hero-tagline">
					Control the narrative. Redact the truth.<br />
					<span
						style="
							font-family: var(--font-special);
							color: var(--accent-red);
							font-size: 0.9em;
							margin-top: 8px;
							display: inline-block;
						"
						>(Or expose it all)</span
					>
				</h2>

				<div style="margin-top: 2rem">
					<a href="#enlist" class="btn hover-trigger">Begin Assignment</a>
				</div>
			</div>
		</section>

		<!-- The Assignment (Dossier) -->
		<section id="assignment">
			<div class="container">
				<div class="section-header">
					<span class="subtitle">Operational Briefing</span>
					<h2>Protocol Omega</h2>
				</div>

				<div class="briefing-layout">
					<div>
						<p style="font-size: 1.1rem; color: #d4d4d4; margin-bottom: 1.5rem">
							You are a Records Analyst for the Bureau. Each day, you receive a
							stack of classified documents: passenger logs, medical reports,
							surveillance transcripts.
						</p>
						<p style="color: var(--text-muted); margin-bottom: 1.5rem">
							Your orders are precise:
							<strong style="color: white">Redact</strong> sensitive names.
							<strong style="color: white">Highlight</strong> required data.
							<strong style="color: white">Void</strong> contaminated files.
						</p>
					</div>

					<div class="dossier-container">
						<div class="paper-sheet">
							<div class="paper-header">
								<p><strong>TO:</strong> ANALYST CH-42</p>
								<p><strong>FROM:</strong> DIRECTOR H.</p>
								<p><strong>SUBJ:</strong> COMPLIANCE MANDATE</p>
							</div>

							<!-- Typewriter Container -->
							<div class="typewriter-container">
								<div class="typewriter-text" id="typewriter"></div>
								<span class="cursor-blink"></span>
							</div>

							<p
								style="
									font-family: var(--font-special);
									transform: rotate(-3deg);
									color: darkblue;
									font-size: 1.2rem;
									margin-top: 2rem;
								">
								Obey. Redact. Survive.
							</p>

							<!-- Hidden UV Message -->
							<div
								class="uv-text"
								style="
									position: absolute;
									bottom: 2rem;
									right: 2rem;
									transform: rotate(-10deg);
								">
								Don't trust them.
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Tools Section -->
		<section id="tools">
			<div class="container">
				<div class="section-header">
					<span class="subtitle">Standard Issue Equipment</span>
					<h2>Trade Tools</h2>
				</div>

				<div class="tools-grid">
					<div class="tool-card hover-trigger">
						<span class="tool-icon">‚¨õ</span>
						<h3>Marker & Eraser</h3>
						<p>
							Black out sensitive names, IDs, and locations.
							<span class="uv-text">They hide their crimes here.</span>
						</p>
					</div>
					<div class="tool-card hover-trigger" id="uv-card">
						<span class="tool-icon">üí°</span>
						<h3>UV Light & Analyzer</h3>
						<p>
							Reveal invisible ink, metadata, and hidden context.
							<span class="uv-text">The only way to see the truth.</span>
						</p>
					</div>
					<div class="tool-card hover-trigger">
						<span class="tool-icon">üñç</span>
						<h3>Highlighter</h3>
						<p>Flag key lines for escalation. Some truths must be seen.</p>
					</div>
					<div class="tool-card hover-trigger">
						<span class="tool-icon">üö´</span>
						<h3>VOID Stamp</h3>
						<p>
							Neutralize contaminated files instantly.
							<span class="uv-text">Destroy the evidence.</span>
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Chapters Section -->
		<section id="archives" style="background: rgba(10, 10, 12, 0.5)">
			<div class="container">
				<div class="section-header">
					<span class="subtitle">Case Files</span>
					<h2>The Archives</h2>
				</div>

				<div class="chapters-grid">
					<div class="folder hover-trigger">
						<strong>Chapter 01</strong>
						<h3>The Epstein Files</h3>
						<p>
							A recovered cache of flight logs.
							<span class="redact">Authorized eyes only.</span>
						</p>
					</div>
					<div class="folder hover-trigger">
						<strong>Chapter 02</strong>
						<h3>The Marrow Clinic</h3>
						<p>
							Medical oversight collapses.
							<span class="redact">Subject 892 missing.</span>
						</p>
					</div>
					<div class="folder hover-trigger">
						<strong>Chapter 03</strong>
						<h3>Project Lantern</h3>
						<p>
							Surveillance operations.
							<span class="redact">We see everything.</span>
						</p>
					</div>
					<div class="folder hover-trigger">
						<strong>Chapter 04</strong>
						<h3>Total Control</h3>
						<p>
							The EIDOLON meme-hazard. <span class="redact">DO NOT VIEW.</span>
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<section id="enlist" style="padding: 4rem 0; border: none">
			<div class="container" style="text-align: center">
				<h2 style="font-size: 2.5rem; margin-bottom: 2rem">Ready to Serve?</h2>
				<a href="#" class="btn hover-trigger">Launch Terminal</a>
			</div>
		</section>

		<footer>
			<div class="container">
				<div class="footer-logo">REDACTED</div>
				<p style="color: #666; font-size: 0.9rem">
					Bureau of Records Integrity // Confidential Simulation
				</p>
				<div class="legal">&copy; 2025 Digital Future Labs.</div>
			</div>
		</footer>

		<script>
			/**
			 * 1. DATA STREAM BACKGROUND (Canvas)
			 */
			const canvas = document.getElementById("data-stream")
			const ctx = canvas.getContext("2d")
			let width, height
			let particles = []

			function resize() {
				width = canvas.width = window.innerWidth
				height = canvas.height = window.innerHeight
			}

			class Particle {
				constructor() {
					this.x = Math.random() * width
					this.y = Math.random() * height
					this.vx = (Math.random() - 0.5) * 0.5
					this.vy = (Math.random() - 0.5) * 0.5
					this.size = Math.random() * 2
				}
				update() {
					this.x += this.vx
					this.y += this.vy
					if (this.x < 0 || this.x > width) this.vx *= -1
					if (this.y < 0 || this.y > height) this.vy *= -1
				}
				draw() {
					ctx.fillStyle = "rgba(255, 255, 255, 0.15)"
					ctx.beginPath()
					ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2)
					ctx.fill()
				}
			}

			function initParticles() {
				particles = []
				const count = Math.min(window.innerWidth / 10, 100)
				for (let i = 0; i < count; i++) particles.push(new Particle())
			}

			function animateParticles() {
				ctx.clearRect(0, 0, width, height)

				// Draw lines
				particles.forEach((p, index) => {
					p.update()
					p.draw()
					for (let j = index + 1; j < particles.length; j++) {
						const p2 = particles[j]
						const dx = p.x - p2.x
						const dy = p.y - p2.y
						const dist = Math.sqrt(dx * dx + dy * dy)
						if (dist < 150) {
							ctx.strokeStyle = `rgba(208, 16, 16, ${0.1 - dist / 1500})` // Red lines
							ctx.lineWidth = 1
							ctx.beginPath()
							ctx.moveTo(p.x, p.y)
							ctx.lineTo(p2.x, p2.y)
							ctx.stroke()
						}
					}
				})
				requestAnimationFrame(animateParticles)
			}

			window.addEventListener("resize", () => {
				resize()
				initParticles()
			})
			resize()
			initParticles()
			animateParticles()

			/**
			 * 2. CUSTOM CURSOR
			 */
			const cursorDot = document.getElementById("cursor-dot")
			const cursorRing = document.getElementById("cursor-ring")

			document.addEventListener("mousemove", (e) => {
				cursorDot.style.left = e.clientX + "px"
				cursorDot.style.top = e.clientY + "px"

				// Add slight delay to ring for fluid feel
				setTimeout(() => {
					cursorRing.style.left = e.clientX + "px"
					cursorRing.style.top = e.clientY + "px"
				}, 50)
			})

			// Hover effect
			document.querySelectorAll(".hover-trigger").forEach((el) => {
				el.addEventListener("mouseenter", () =>
					cursorRing.classList.add("hovered")
				)
				el.addEventListener("mouseleave", () =>
					cursorRing.classList.remove("hovered")
				)
			})

			/**
			 * 3. TYPEWRITER EFFECT
			 * Merged text from landing.html
			 */
			const textParts = [
				"Effective immediately, all references to ",
				"<span class='redact'>THE RESISTANCE</span>",
				" must be expunged from daily feeds.\n\n",
				"We have detected unauthorized leaks in Sector 4. Any deviation from the ",
				"<span class='redact'>OFFICIAL NARRATIVE</span>",
				" will result in immediate termination of employment and ",
				"<span class='redact'>LIFE</span>",
				" privileges.",
			]

			// We can't type HTML tags easily char by char without logic,
			// so we modify to simpler typing for now or using a parser.
			// Simplified approach: Type text, then insert HTML at end?
			// Better: process chunks.

			const typeContainer = document.getElementById("typewriter")
			let partIndex = 0
			let charIndex = 0

			function typeWriter() {
				if (partIndex < textParts.length) {
					const currentPart = textParts[partIndex]

					if (currentPart.startsWith("<span")) {
						// It's a tag, append immediately
						typeContainer.innerHTML += currentPart
						partIndex++
						setTimeout(typeWriter, 100)
					} else {
						// It's text
						if (charIndex < currentPart.length) {
							const char = currentPart.charAt(charIndex)
							typeContainer.innerHTML += char === "\n" ? "<br>" : char
							charIndex++
							setTimeout(typeWriter, 30)
						} else {
							charIndex = 0
							partIndex++
							setTimeout(typeWriter, 30)
						}
					}
				}
			}

			// Trigger typing when visible
			const observer = new IntersectionObserver((entries) => {
				entries.forEach((entry) => {
					if (entry.isIntersecting) {
						typeWriter()
						observer.unobserve(entry.target)
					}
				})
			})
			observer.observe(document.querySelector(".typewriter-container"))

			/**
			 * 4. UI TOGGLE LOGIC
			 */

			// UV Filter Toggle
			const uvSwitch = document.getElementById("uv-switch")
			const uvCheckbox = uvSwitch.querySelector(".toggle-checkbox")

			uvSwitch.addEventListener("click", (e) => {
				if (e.target !== uvCheckbox) {
					uvCheckbox.checked = !uvCheckbox.checked
				}

				if (uvCheckbox.checked) {
					document.body.classList.add("uv-mode")
					// Highlight UV tool card
					const uvCard = document.getElementById("uv-card")
					if (uvCard) uvCard.style.borderColor = "blue"
				} else {
					document.body.classList.remove("uv-mode")
					const uvCard = document.getElementById("uv-card")
					if (uvCard) uvCard.style.borderColor = ""
				}
			})

			// Override/Decypher Toggle
			const overrideToggle = document.getElementById("override-toggle")
			const decypherDiv = overrideToggle.closest(".override-switch")

			decypherDiv.addEventListener("click", (e) => {
				if (e.target !== overrideToggle) {
					overrideToggle.checked = !overrideToggle.checked
				}

				if (overrideToggle.checked) {
					document.body.classList.add("override-active")
				} else {
					document.body.classList.remove("override-active")
				}
			})
		</script>
	</body>
</html>
